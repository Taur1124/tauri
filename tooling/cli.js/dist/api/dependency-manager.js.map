{"version":3,"sources":["webpack://tauri/webpack/universalModuleDefinition","webpack://tauri/../cli.rs/Cargo.toml","webpack://tauri/./src/api/dependency-manager/cargo-crates.ts","webpack://tauri/./src/api/dependency-manager/index.ts","webpack://tauri/./src/api/dependency-manager/managers/index.ts","webpack://tauri/./src/api/dependency-manager/managers/npm-manager.ts","webpack://tauri/./src/api/dependency-manager/managers/pnpm-manager.ts","webpack://tauri/./src/api/dependency-manager/managers/types.ts","webpack://tauri/./src/api/dependency-manager/managers/yarn-manager.ts","webpack://tauri/./src/api/dependency-manager/npm-packages.ts","webpack://tauri/./src/api/dependency-manager/rust.ts","webpack://tauri/./src/api/dependency-manager/types.ts","webpack://tauri/./src/api/dependency-manager/util.ts","webpack://tauri/./src/helpers/app-paths.ts","webpack://tauri/./src/helpers/download-binary.ts","webpack://tauri/./src/helpers/get-script-version.ts","webpack://tauri/./src/helpers/logger.ts","webpack://tauri/./src/helpers/spawn.ts","webpack://tauri/external \"@tauri-apps/toml\"","webpack://tauri/external \"chalk\"","webpack://tauri/external \"cross-spawn\"","webpack://tauri/external \"fs\"","webpack://tauri/external \"got\"","webpack://tauri/external \"https\"","webpack://tauri/external \"inquirer\"","webpack://tauri/external \"ms\"","webpack://tauri/external \"os\"","webpack://tauri/external \"path\"","webpack://tauri/external \"stream\"","webpack://tauri/external \"util\"","webpack://tauri/webpack/bootstrap","webpack://tauri/webpack/startup"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;ACVA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,C;;;;;;;;;;;AC5Ga;AACb;AACA;AACA;AACA;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,cAAc,GAAG,eAAe;AAChC,cAAc,mBAAO,CAAC,qDAAuB;AAC7C,cAAc,mBAAO,CAAC,sDAAS;AAC/B,aAAa,mBAAO,CAAC,oDAAQ;AAC7B,+BAA+B,mBAAO,CAAC,qDAAsB;AAC7D,kBAAkB,mBAAO,CAAC,2DAAyB;AACnD,WAAW,mBAAO,CAAC,cAAI;AACvB,6BAA6B,mBAAO,CAAC,0CAAkB;AACvD,iCAAiC,mBAAO,CAAC,0BAAU;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,gCAAgC,EAAE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,oEAAoE,EAAE;AAClJ;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,eAAe;AACf;AACA;AACA;AACA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,cAAc;;;;;;;;;;;;AC7LD;AACb;AACA;AACA;AACA;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,cAAc,GAAG,eAAe;AAChC,cAAc,mBAAO,CAAC,sDAAS;AAC/B,cAAc,mBAAO,CAAC,mDAAqB;AAC3C,2CAA2C,mBAAO,CAAC,6EAAkC;AACrF,wBAAwB,mBAAO,CAAC,uEAA+B;AAC/D,+BAA+B,mBAAO,CAAC,qDAAsB;AAC7D,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;AAC3B,WAAW,mBAAO,CAAC,cAAI;AACvB,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,cAAc;;;;;;;;;;;;ACjJD;AACb;AACA;AACA;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C,sBAAsB,KAAK;;;;;;;;;;;;ACX7D;AACb;AACA;AACA;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,gBAAgB,GAAG,kBAAkB,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,yBAAyB,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,6BAA6B,GAAG,kBAAkB;AAC7O,oBAAoB,mBAAO,CAAC,gCAAa;AACzC,kBAAkB,mBAAO,CAAC,2DAAyB;AACnD,WAAW,mBAAO,CAAC,cAAI;AACvB;AACA,iBAAiB,mBAAO,CAAC,kEAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,gBAAgB;;;;;;;;;;;;ACvEH;AACb;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,eAAe,GAAG,gBAAgB,GAAG,cAAc;AACnD,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;AAC3B,+BAA+B,mBAAO,CAAC,yCAAU;AACjD,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gBAAgB;AAChB;AACA,yBAAyB,iCAAiC,EAAE;AAC5D,2BAA2B,mCAAmC;AAC9D;AACA,eAAe;;;;;;;;;;;;ACvCF;AACb;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,sBAAsB,GAAG,mBAAmB;AAC5C,+BAA+B,mBAAO,CAAC,sBAAQ;AAC/C,aAAa,mBAAO,CAAC,kBAAM;AAC3B,2BAA2B,mBAAO,CAAC,cAAI;AACvC,4BAA4B,mBAAO,CAAC,gBAAK;AACzC,6BAA6B,mBAAO,CAAC,kBAAM;AAC3C;AACA;AACA;AACA,uBAAuB,mBAAO,CAAC,wDAA4B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,sBAAsB;;;;;;;;;;;;ACpJT;AACb;AACA;AACA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,oBAAoB,mBAAO,CAAC,gCAAa;AACzC;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;;;;;;;;;;;ACzBF;AACb;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C,2BAA2B,mBAAO,CAAC,cAAI;AACvC;AACA,eAAe;AACf,2BAA2B,+BAA+B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC3BY;AACb;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,iBAAiB,GAAG,aAAa;AACjC,oCAAoC,mBAAO,CAAC,gCAAa;AACzD,+BAA+B,mBAAO,CAAC,yCAAU;AACjD,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;;AC/DjB,8C;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,gC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,gC;;;;;;;;;;;ACAA,gC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,kC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UCtBA;UACA;UACA;UACA","file":"api/dependency-manager.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tauri\"] = factory();\n\telse\n\t\troot[\"tauri\"] = factory();\n})(this, function() {\nreturn ","module.exports    = {\n\t\"workspace\": {},\n\t\"package\": {\n\t\t\"name\": \"tauri-cli\",\n\t\t\"version\": \"1.0.0-beta.5\",\n\t\t\"authors\": [\n\t\t\t\"Tauri Programme within The Commons Conservancy\"\n\t\t],\n\t\t\"edition\": \"2018\",\n\t\t\"categories\": [\n\t\t\t\"gui\",\n\t\t\t\"web-programming\"\n\t\t],\n\t\t\"license\": \"Apache-2.0 OR MIT\",\n\t\t\"homepage\": \"https://tauri.studio\",\n\t\t\"repository\": \"https://github.com/tauri-apps/tauri\",\n\t\t\"description\": \"Command line interface for building Tauri apps\",\n\t\t\"include\": [\n\t\t\t\"src/\",\n\t\t\t\"/templates\",\n\t\t\t\"MergeModules/\",\n\t\t\t\"*.json\",\n\t\t\t\"*.rs\"\n\t\t]\n\t},\n\t\"bin\": [\n\t\t{\n\t\t\t\"name\": \"cargo-tauri\",\n\t\t\t\"path\": \"src/main.rs\"\n\t\t}\n\t],\n\t\"dependencies\": {\n\t\t\"clap\": {\n\t\t\t\"version\": \"3.0.0-beta.2\",\n\t\t\t\"features\": [\n\t\t\t\t\"yaml\"\n\t\t\t]\n\t\t},\n\t\t\"anyhow\": \"1.0\",\n\t\t\"tauri-bundler\": {\n\t\t\t\"version\": \"1.0.0-beta.3\",\n\t\t\t\"path\": \"../bundler\"\n\t\t},\n\t\t\"colored\": \"2.0\",\n\t\t\"once_cell\": \"1.8\",\n\t\t\"serde\": {\n\t\t\t\"version\": \"1.0\",\n\t\t\t\"features\": [\n\t\t\t\t\"derive\"\n\t\t\t]\n\t\t},\n\t\t\"serde_json\": \"1.0\",\n\t\t\"serde_with\": \"1.9\",\n\t\t\"notify\": \"4.0\",\n\t\t\"shared_child\": \"0.3\",\n\t\t\"toml_edit\": \"0.2\",\n\t\t\"json-patch\": \"0.2\",\n\t\t\"schemars\": \"0.8\",\n\t\t\"toml\": \"0.5\",\n\t\t\"valico\": \"3.6\",\n\t\t\"handlebars\": \"4.1\",\n\t\t\"include_dir\": \"0.6\",\n\t\t\"minisign\": \"0.6\",\n\t\t\"base64\": \"0.13.0\",\n\t\t\"ureq\": \"2.1\",\n\t\t\"os_info\": \"3.0\",\n\t\t\"semver\": \"1.0\",\n\t\t\"regex\": \"1.5\",\n\t\t\"lazy_static\": \"1\",\n\t\t\"libc\": \"0.2\",\n\t\t\"terminal_size\": \"0.1\",\n\t\t\"unicode-width\": \"0.1\",\n\t\t\"tempfile\": \"3\",\n\t\t\"zeroize\": \"1.3\"\n\t},\n\t\"target\": {\n\t\t\"cfg(windows)\": {\n\t\t\t\"dependencies\": {\n\t\t\t\t\"winapi\": {\n\t\t\t\t\t\"version\": \"0.3\",\n\t\t\t\t\t\"features\": [\n\t\t\t\t\t\t\"winbase\",\n\t\t\t\t\t\t\"winuser\",\n\t\t\t\t\t\t\"consoleapi\",\n\t\t\t\t\t\t\"processenv\",\n\t\t\t\t\t\t\"wincon\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"encode_unicode\": \"0.3\"\n\t\t\t}\n\t\t},\n\t\t\"cfg(target_os = \\\"linux\\\")\": {\n\t\t\t\"dependencies\": {\n\t\t\t\t\"heck\": \"0.3\"\n\t\t\t}\n\t\t}\n\t},\n\t\"build-dependencies\": {\n\t\t\"schemars\": \"0.8\",\n\t\t\"serde\": {\n\t\t\t\"version\": \"1.0\",\n\t\t\t\"features\": [\n\t\t\t\t\"derive\"\n\t\t\t]\n\t\t},\n\t\t\"serde_json\": \"1.0\",\n\t\t\"serde_with\": \"1.9\"\n\t}\n}","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.update = exports.install = void 0;\r\nvar spawn_1 = require(\"./../../helpers/spawn\");\r\nvar types_1 = require(\"./types\");\r\nvar util_1 = require(\"./util\");\r\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\r\nvar app_paths_1 = require(\"../../helpers/app-paths\");\r\nvar fs_1 = require(\"fs\");\r\nvar toml_1 = __importDefault(require(\"@tauri-apps/toml\"));\r\nvar inquirer_1 = __importDefault(require(\"inquirer\"));\r\nvar log = logger_1.default('dependency:crates');\r\nvar dependencies = ['tauri'];\r\nfunction readToml(tomlPath) {\r\n    if (fs_1.existsSync(tomlPath)) {\r\n        var manifest = fs_1.readFileSync(tomlPath).toString();\r\n        return toml_1.default.parse(manifest);\r\n    }\r\n    return null;\r\n}\r\nfunction dependencyDefinition(version) {\r\n    return { version: version.substring(0, version.lastIndexOf('.')) };\r\n}\r\nfunction manageDependencies(managementType) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var installedDeps, updatedDeps, result, manifest, lockPath, lock, _loop_1, _i, dependencies_1, dependency;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    installedDeps = [];\r\n                    updatedDeps = [];\r\n                    result = new Map();\r\n                    manifest = readToml(app_paths_1.resolve.tauri('Cargo.toml'));\r\n                    if (manifest === null) {\r\n                        log('Cargo.toml not found. Skipping crates check...');\r\n                        return [2 /*return*/, result];\r\n                    }\r\n                    lockPath = app_paths_1.resolve.tauri('Cargo.lock');\r\n                    if (!fs_1.existsSync(lockPath)) {\r\n                        spawn_1.spawnSync('cargo', ['generate-lockfile'], app_paths_1.tauriDir);\r\n                    }\r\n                    lock = readToml(lockPath);\r\n                    _loop_1 = function (dependency) {\r\n                        var lockPackages, manifestDep, currentVersion, latestVersion, latestVersion, inquired;\r\n                        return __generator(this, function (_b) {\r\n                            switch (_b.label) {\r\n                                case 0:\r\n                                    lockPackages = lock\r\n                                        ? lock.package.filter(function (pkg) { return pkg.name === dependency; })\r\n                                        : [];\r\n                                    manifestDep = manifest.dependencies[dependency];\r\n                                    currentVersion = lockPackages.length === 1\r\n                                        ? lockPackages[0].version\r\n                                        : typeof manifestDep === 'string'\r\n                                            ? manifestDep\r\n                                            : manifestDep === null || manifestDep === void 0 ? void 0 : manifestDep.version;\r\n                                    if (!(currentVersion === undefined)) return [3 /*break*/, 1];\r\n                                    log(\"Installing \" + dependency + \"...\");\r\n                                    latestVersion = util_1.getCrateLatestVersion(dependency);\r\n                                    if (latestVersion !== null) {\r\n                                        // eslint-disable-next-line security/detect-object-injection\r\n                                        manifest.dependencies[dependency] = dependencyDefinition(latestVersion);\r\n                                    }\r\n                                    installedDeps.push(dependency);\r\n                                    return [3 /*break*/, 6];\r\n                                case 1:\r\n                                    if (!(managementType === types_1.ManagementType.Update)) return [3 /*break*/, 5];\r\n                                    latestVersion = util_1.getCrateLatestVersion(dependency);\r\n                                    if (!(latestVersion !== null && util_1.semverLt(currentVersion, latestVersion))) return [3 /*break*/, 3];\r\n                                    return [4 /*yield*/, inquirer_1.default.prompt([\r\n                                            {\r\n                                                type: 'confirm',\r\n                                                name: 'answer',\r\n                                                message: \"[CRATES] \\\"\" + dependency + \"\\\" latest version is \" + latestVersion + \". Do you want to update?\",\r\n                                                default: false\r\n                                            }\r\n                                        ])];\r\n                                case 2:\r\n                                    inquired = (_b.sent());\r\n                                    if (inquired.answer) {\r\n                                        log(\"Updating \" + dependency + \"...\");\r\n                                        // eslint-disable-next-line security/detect-object-injection\r\n                                        manifest.dependencies[dependency] =\r\n                                            dependencyDefinition(latestVersion);\r\n                                        updatedDeps.push(dependency);\r\n                                    }\r\n                                    return [3 /*break*/, 4];\r\n                                case 3:\r\n                                    log(\"\\\"\" + dependency + \"\\\" is up to date\");\r\n                                    _b.label = 4;\r\n                                case 4: return [3 /*break*/, 6];\r\n                                case 5:\r\n                                    log(\"\\\"\" + dependency + \"\\\" is already installed\");\r\n                                    _b.label = 6;\r\n                                case 6: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    };\r\n                    _i = 0, dependencies_1 = dependencies;\r\n                    _a.label = 1;\r\n                case 1:\r\n                    if (!(_i < dependencies_1.length)) return [3 /*break*/, 4];\r\n                    dependency = dependencies_1[_i];\r\n                    return [5 /*yield**/, _loop_1(dependency)];\r\n                case 2:\r\n                    _a.sent();\r\n                    _a.label = 3;\r\n                case 3:\r\n                    _i++;\r\n                    return [3 /*break*/, 1];\r\n                case 4:\r\n                    if (installedDeps.length || updatedDeps.length) {\r\n                        fs_1.writeFileSync(app_paths_1.resolve.tauri('Cargo.toml'), toml_1.default.stringify(manifest));\r\n                    }\r\n                    if (updatedDeps.length) {\r\n                        if (!fs_1.existsSync(app_paths_1.resolve.tauri('Cargo.lock'))) {\r\n                            spawn_1.spawnSync('cargo', ['generate-lockfile'], app_paths_1.tauriDir);\r\n                        }\r\n                        spawn_1.spawnSync('cargo', __spreadArray([\r\n                            'update',\r\n                            '--aggressive'\r\n                        ], updatedDeps.reduce(function (initialValue, dep) { return __spreadArray(__spreadArray([], initialValue), ['-p', dep]); }, [])), app_paths_1.tauriDir);\r\n                    }\r\n                    result.set(types_1.ManagementType.Install, installedDeps);\r\n                    result.set(types_1.ManagementType.Update, updatedDeps);\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction install() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.install = install;\r\nfunction update() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Update)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.update = update;\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\r\nvar rust = __importStar(require(\"./rust\"));\r\nvar cargoCrates = __importStar(require(\"./cargo-crates\"));\r\nvar npmPackages = __importStar(require(\"./npm-packages\"));\r\nvar log = logger_1.default('dependency:manager');\r\nmodule.exports = {\r\n    installDependencies: function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        log('Installing missing dependencies...');\r\n                        return [4 /*yield*/, rust.install()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, cargoCrates.install()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, npmPackages.install()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    },\r\n    updateDependencies: function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        log('Updating dependencies...');\r\n                        return [4 /*yield*/, rust.update()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, cargoCrates.update()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, npmPackages.update()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    }\r\n};\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./yarn-manager\"), exports);\r\n__exportStar(require(\"./npm-manager\"), exports);\r\n__exportStar(require(\"./pnpm-manager\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NpmManager = void 0;\r\nvar cross_spawn_1 = require(\"cross-spawn\");\r\nvar spawn_1 = require(\"../../../helpers/spawn\");\r\nvar app_paths_1 = require(\"../../../helpers/app-paths\");\r\nvar NpmManager = /** @class */ (function () {\r\n    function NpmManager() {\r\n        this.type = 'npm';\r\n    }\r\n    NpmManager.prototype.installPackage = function (packageName) {\r\n        spawn_1.spawnSync('npm', ['install', packageName], app_paths_1.appDir);\r\n    };\r\n    NpmManager.prototype.installDevPackage = function (packageName) {\r\n        spawn_1.spawnSync('npm', ['install', packageName, '--save-dev'], app_paths_1.appDir);\r\n    };\r\n    NpmManager.prototype.updatePackage = function (packageName) {\r\n        spawn_1.spawnSync('npm', ['install', packageName + \"@latest\"], app_paths_1.appDir);\r\n    };\r\n    NpmManager.prototype.getPackageVersion = function (packageName) {\r\n        var child = cross_spawn_1.sync('npm', ['list', packageName, 'version', '--depth', '0'], {\r\n            cwd: app_paths_1.appDir\r\n        });\r\n        var output = String(child.output[1]);\r\n        // eslint-disable-next-line security/detect-non-literal-regexp\r\n        var matches = new RegExp(packageName + '@(\\\\S+)', 'g').exec(output);\r\n        if (matches === null || matches === void 0 ? void 0 : matches[1]) {\r\n            return matches[1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    NpmManager.prototype.getLatestVersion = function (packageName) {\r\n        var child = cross_spawn_1.sync('npm', ['show', packageName, 'version'], {\r\n            cwd: app_paths_1.appDir\r\n        });\r\n        return String(child.output[1]).replace('\\n', '');\r\n    };\r\n    return NpmManager;\r\n}());\r\nexports.NpmManager = NpmManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PnpmManager = void 0;\r\nvar cross_spawn_1 = require(\"cross-spawn\");\r\nvar spawn_1 = require(\"../../../helpers/spawn\");\r\nvar app_paths_1 = require(\"../../../helpers/app-paths\");\r\nvar PnpmManager = /** @class */ (function () {\r\n    function PnpmManager() {\r\n        this.type = 'pnpm';\r\n    }\r\n    PnpmManager.prototype.installPackage = function (packageName) {\r\n        spawn_1.spawnSync('pnpm', ['add', packageName], app_paths_1.appDir);\r\n    };\r\n    PnpmManager.prototype.installDevPackage = function (packageName) {\r\n        spawn_1.spawnSync('pnpm', ['add', packageName, '--save-dev'], app_paths_1.appDir);\r\n    };\r\n    PnpmManager.prototype.updatePackage = function (packageName) {\r\n        spawn_1.spawnSync('pnpm', ['add', packageName + \"@latest\"], app_paths_1.appDir);\r\n    };\r\n    PnpmManager.prototype.getPackageVersion = function (packageName) {\r\n        var child = cross_spawn_1.sync('pnpm', ['list', packageName, 'version', '--depth', '0'], {\r\n            cwd: app_paths_1.appDir\r\n        });\r\n        var output = String(child.output[1]);\r\n        // eslint-disable-next-line security/detect-non-literal-regexp\r\n        var matches = new RegExp(packageName + ' (\\\\S+)', 'g').exec(output);\r\n        if (matches === null || matches === void 0 ? void 0 : matches[1]) {\r\n            return matches[1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    PnpmManager.prototype.getLatestVersion = function (packageName) {\r\n        var child = cross_spawn_1.sync('pnpm', ['info', packageName, 'version'], {\r\n            cwd: app_paths_1.appDir\r\n        });\r\n        return String(child.output[1]).replace('\\n', '');\r\n    };\r\n    return PnpmManager;\r\n}());\r\nexports.PnpmManager = PnpmManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.YarnManager = void 0;\r\nvar cross_spawn_1 = require(\"cross-spawn\");\r\nvar spawn_1 = require(\"../../../helpers/spawn\");\r\nvar app_paths_1 = require(\"../../../helpers/app-paths\");\r\nvar YarnManager = /** @class */ (function () {\r\n    function YarnManager() {\r\n        this.type = 'yarn';\r\n    }\r\n    YarnManager.prototype.installPackage = function (packageName) {\r\n        spawn_1.spawnSync('yarn', ['add', packageName], app_paths_1.appDir);\r\n    };\r\n    YarnManager.prototype.installDevPackage = function (packageName) {\r\n        spawn_1.spawnSync('yarn', ['add', packageName, '--dev'], app_paths_1.appDir);\r\n    };\r\n    YarnManager.prototype.updatePackage = function (packageName) {\r\n        spawn_1.spawnSync('yarn', ['upgrade', packageName, '--latest'], app_paths_1.appDir);\r\n    };\r\n    YarnManager.prototype.getPackageVersion = function (packageName) {\r\n        var child = cross_spawn_1.sync('yarn', ['list', '--pattern', packageName, '--depth', '0'], { cwd: app_paths_1.appDir });\r\n        var output = String(child.output[1]);\r\n        // eslint-disable-next-line security/detect-non-literal-regexp\r\n        var matches = new RegExp(packageName + '@(\\\\S+)', 'g').exec(output);\r\n        if (matches === null || matches === void 0 ? void 0 : matches[1]) {\r\n            return matches[1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    YarnManager.prototype.getLatestVersion = function (packageName) {\r\n        var child = cross_spawn_1.sync('yarn', ['info', packageName, 'version', '--json'], { cwd: app_paths_1.appDir });\r\n        var output = String(child.output[1]);\r\n        var packageJson = JSON.parse(output);\r\n        return packageJson.data;\r\n    };\r\n    return YarnManager;\r\n}());\r\nexports.YarnManager = YarnManager;\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.update = exports.installTheseDev = exports.installThese = exports.install = void 0;\r\nvar types_1 = require(\"./types\");\r\nvar util_1 = require(\"./util\");\r\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\r\nvar app_paths_1 = require(\"../../helpers/app-paths\");\r\nvar inquirer_1 = __importDefault(require(\"inquirer\"));\r\nvar fs_1 = require(\"fs\");\r\nvar cross_spawn_1 = require(\"cross-spawn\");\r\nvar log = logger_1.default('dependency:npm-packages');\r\nfunction manageDependencies(managementType, dependencies) {\r\n    var _a, _b, _c;\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var installedDeps, updatedDeps, npmChild, yarnChild, pnpmChild, _i, dependencies_1, dependency, currentVersion, packageManager, prefix, inquired, latestVersion, inquired, result;\r\n        return __generator(this, function (_d) {\r\n            switch (_d.label) {\r\n                case 0:\r\n                    installedDeps = [];\r\n                    updatedDeps = [];\r\n                    npmChild = cross_spawn_1.sync('npm', ['--version']);\r\n                    yarnChild = cross_spawn_1.sync('yarn', ['--version']);\r\n                    pnpmChild = cross_spawn_1.sync('pnpm', ['--version']);\r\n                    if (((_a = npmChild.status) !== null && _a !== void 0 ? _a : npmChild.error) &&\r\n                        ((_b = yarnChild.status) !== null && _b !== void 0 ? _b : yarnChild.error) &&\r\n                        ((_c = pnpmChild.status) !== null && _c !== void 0 ? _c : pnpmChild.error)) {\r\n                        throw new Error('must have installed one of the following package managers `npm`, `yarn`, `pnpm` to manage dependenices');\r\n                    }\r\n                    if (!fs_1.existsSync(app_paths_1.resolve.app('package.json'))) return [3 /*break*/, 10];\r\n                    _i = 0, dependencies_1 = dependencies;\r\n                    _d.label = 1;\r\n                case 1:\r\n                    if (!(_i < dependencies_1.length)) return [3 /*break*/, 10];\r\n                    dependency = dependencies_1[_i];\r\n                    currentVersion = util_1.getNpmPackageVersion(dependency);\r\n                    packageManager = util_1.getManager().type.toUpperCase();\r\n                    if (!(currentVersion === null)) return [3 /*break*/, 4];\r\n                    log(\"Installing \" + dependency + \"...\");\r\n                    if (!(managementType === types_1.ManagementType.Install ||\r\n                        managementType === types_1.ManagementType.InstallDev)) return [3 /*break*/, 3];\r\n                    prefix = managementType === types_1.ManagementType.InstallDev\r\n                        ? ' as dev-dependency'\r\n                        : '';\r\n                    return [4 /*yield*/, inquirer_1.default.prompt([\r\n                            {\r\n                                type: 'confirm',\r\n                                name: 'answer',\r\n                                message: \"[\" + packageManager + \"]: \\\"Do you want to install \" + dependency + prefix + \"?\\\"\",\r\n                                default: false\r\n                            }\r\n                        ])];\r\n                case 2:\r\n                    inquired = _d.sent();\r\n                    if (inquired.answer) {\r\n                        if (managementType === types_1.ManagementType.Install) {\r\n                            util_1.installNpmPackage(dependency);\r\n                        }\r\n                        else if (managementType === types_1.ManagementType.InstallDev) {\r\n                            util_1.installNpmDevPackage(dependency);\r\n                        }\r\n                        installedDeps.push(dependency);\r\n                    }\r\n                    _d.label = 3;\r\n                case 3: return [3 /*break*/, 9];\r\n                case 4:\r\n                    if (!(managementType === types_1.ManagementType.Update)) return [3 /*break*/, 8];\r\n                    latestVersion = util_1.getNpmLatestVersion(dependency);\r\n                    if (!util_1.semverLt(currentVersion, latestVersion)) return [3 /*break*/, 6];\r\n                    return [4 /*yield*/, inquirer_1.default.prompt([\r\n                            {\r\n                                type: 'confirm',\r\n                                name: 'answer',\r\n                                message: \"[\" + packageManager + \"]: \\\"\" + dependency + \"\\\" latest version is \" + latestVersion + \". Do you want to update?\",\r\n                                default: false\r\n                            }\r\n                        ])];\r\n                case 5:\r\n                    inquired = _d.sent();\r\n                    if (inquired.answer) {\r\n                        log(\"Updating \" + dependency + \"...\");\r\n                        util_1.updateNpmPackage(dependency);\r\n                        updatedDeps.push(dependency);\r\n                    }\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    log(\"\\\"\" + dependency + \"\\\" is up to date\");\r\n                    _d.label = 7;\r\n                case 7: return [3 /*break*/, 9];\r\n                case 8:\r\n                    log(\"\\\"\" + dependency + \"\\\" is already installed\");\r\n                    _d.label = 9;\r\n                case 9:\r\n                    _i++;\r\n                    return [3 /*break*/, 1];\r\n                case 10:\r\n                    result = new Map();\r\n                    result.set(types_1.ManagementType.Install, installedDeps);\r\n                    result.set(types_1.ManagementType.Update, updatedDeps);\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    });\r\n}\r\nvar dependencies = ['@tauri-apps/api', '@tauri-apps/cli'];\r\nfunction install() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install, dependencies)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.install = install;\r\nfunction installThese(dependencies) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install, dependencies)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.installThese = installThese;\r\nfunction installTheseDev(dependencies) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.InstallDev, dependencies)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.installTheseDev = installTheseDev;\r\nfunction update() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Update, dependencies)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.update = update;\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.update = exports.install = void 0;\r\nvar types_1 = require(\"./types\");\r\nvar spawn_1 = require(\"../../helpers/spawn\");\r\nvar get_script_version_1 = __importDefault(require(\"../../helpers/get-script-version\"));\r\nvar download_binary_1 = require(\"../../helpers/download-binary\");\r\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\r\nvar fs_1 = require(\"fs\");\r\nvar path_1 = require(\"path\");\r\nvar os_1 = require(\"os\");\r\nvar https_1 = __importDefault(require(\"https\"));\r\nvar log = logger_1.default('dependency:rust');\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nfunction download(url, dest) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var file;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    file = fs_1.createWriteStream(dest);\r\n                    return [4 /*yield*/, new Promise(function (resolve, reject) {\r\n                            https_1.default\r\n                                .get(url, function (response) {\r\n                                response.pipe(file);\r\n                                file.on('finish', function () {\r\n                                    file.close();\r\n                                    resolve();\r\n                                });\r\n                            })\r\n                                .on('error', function (err) {\r\n                                fs_1.unlinkSync(dest);\r\n                                reject(err.message);\r\n                            });\r\n                        })];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction installRustup() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var assetName, rustupPath;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    assetName = os_1.platform() === 'win32' ? 'rustup-init.exe' : 'rustup-init.sh';\r\n                    rustupPath = path_1.resolve(__dirname, \"../../bin/\" + assetName);\r\n                    if (!!fs_1.existsSync(rustupPath)) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, download_binary_1.downloadRustup()];\r\n                case 1:\r\n                    _a.sent();\r\n                    _a.label = 2;\r\n                case 2:\r\n                    if (os_1.platform() === 'win32') {\r\n                        return [2 /*return*/, spawn_1.spawnSync('powershell', ['-NoProfile', rustupPath], process.cwd())];\r\n                    }\r\n                    return [2 /*return*/, spawn_1.spawnSync('/bin/sh', [rustupPath], process.cwd())];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction manageDependencies(managementType) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!(get_script_version_1.default('rustup') === null)) return [3 /*break*/, 2];\r\n                    log('Installing rustup...');\r\n                    return [4 /*yield*/, installRustup()];\r\n                case 1:\r\n                    _a.sent();\r\n                    _a.label = 2;\r\n                case 2:\r\n                    if (managementType === types_1.ManagementType.Update) {\r\n                        spawn_1.spawnSync('rustup', ['update'], process.cwd());\r\n                    }\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction install() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.install = install;\r\nfunction update() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Update)];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.update = update;\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ManagementType = void 0;\r\nvar ManagementType;\r\n(function (ManagementType) {\r\n    ManagementType[ManagementType[\"Install\"] = 0] = \"Install\";\r\n    ManagementType[ManagementType[\"InstallDev\"] = 1] = \"InstallDev\";\r\n    ManagementType[ManagementType[\"Update\"] = 2] = \"Update\";\r\n})(ManagementType = exports.ManagementType || (exports.ManagementType = {}));\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.semverLt = exports.padVersion = exports.updateNpmPackage = exports.installNpmDevPackage = exports.installNpmPackage = exports.getNpmPackageVersion = exports.getNpmLatestVersion = exports.getCrateLatestVersion = exports.getManager = void 0;\r\nvar cross_spawn_1 = require(\"cross-spawn\");\r\nvar app_paths_1 = require(\"../../helpers/app-paths\");\r\nvar fs_1 = require(\"fs\");\r\n// import semver from 'semver'\r\nvar managers_1 = require(\"./managers\");\r\nvar getManager = function () {\r\n    if (fs_1.existsSync(app_paths_1.resolve.app('yarn.lock'))) {\r\n        return new managers_1.YarnManager();\r\n    }\r\n    else if (fs_1.existsSync(app_paths_1.resolve.app('pnpm-lock.yaml'))) {\r\n        return new managers_1.PnpmManager();\r\n    }\r\n    else {\r\n        return new managers_1.NpmManager();\r\n    }\r\n};\r\nexports.getManager = getManager;\r\nfunction getCrateLatestVersion(crateName) {\r\n    var child = cross_spawn_1.sync('cargo', ['search', crateName, '--limit', '1']);\r\n    var output = String(child.output[1]);\r\n    // eslint-disable-next-line security/detect-non-literal-regexp\r\n    var matches = new RegExp(crateName + ' = \"(\\\\S+)\"', 'g').exec(output);\r\n    if (matches === null || matches === void 0 ? void 0 : matches[1]) {\r\n        return matches[1];\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexports.getCrateLatestVersion = getCrateLatestVersion;\r\nfunction getNpmLatestVersion(packageName) {\r\n    return getManager().getLatestVersion(packageName);\r\n}\r\nexports.getNpmLatestVersion = getNpmLatestVersion;\r\nfunction getNpmPackageVersion(packageName) {\r\n    return getManager().getPackageVersion(packageName);\r\n}\r\nexports.getNpmPackageVersion = getNpmPackageVersion;\r\nfunction installNpmPackage(packageName) {\r\n    return getManager().installPackage(packageName);\r\n}\r\nexports.installNpmPackage = installNpmPackage;\r\nfunction installNpmDevPackage(packageName) {\r\n    return getManager().installDevPackage(packageName);\r\n}\r\nexports.installNpmDevPackage = installNpmDevPackage;\r\nfunction updateNpmPackage(packageName) {\r\n    return getManager().updatePackage(packageName);\r\n}\r\nexports.updateNpmPackage = updateNpmPackage;\r\nfunction padVersion(version) {\r\n    var _a;\r\n    var count = ((_a = version.match(/\\./g)) !== null && _a !== void 0 ? _a : []).length;\r\n    while (count < 2) {\r\n        count++;\r\n        version += '.0';\r\n    }\r\n    return version;\r\n}\r\nexports.padVersion = padVersion;\r\nfunction semverLt(first, second) {\r\n    return first !== second;\r\n    // TODO: When version 1.0.0 is released this code should work again\r\n    // return semver.lt(padVersion(first), padVersion(second))\r\n}\r\nexports.semverLt = semverLt;\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.resolve = exports.tauriDir = exports.appDir = void 0;\r\nvar fs_1 = require(\"fs\");\r\nvar path_1 = require(\"path\");\r\nvar logger_1 = __importDefault(require(\"./logger\"));\r\nvar chalk_1 = __importDefault(require(\"chalk\"));\r\nvar warn = logger_1.default('tauri', chalk_1.default.red);\r\nfunction resolvePath(basePath, dir) {\r\n    return dir && path_1.isAbsolute(dir) ? dir : path_1.resolve(basePath, dir);\r\n}\r\nvar getAppDir = function () {\r\n    var dir = process.cwd();\r\n    var count = 0;\r\n    // only go up three folders max\r\n    while (dir.length > 0 && !dir.endsWith(path_1.sep) && count <= 2) {\r\n        if (fs_1.existsSync(path_1.join(dir, 'src-tauri', 'tauri.conf.json'))) {\r\n            return dir;\r\n        }\r\n        count++;\r\n        dir = path_1.normalize(path_1.join(dir, '..'));\r\n    }\r\n    warn(\"Couldn't find recognize the current folder as a part of a Tauri project\");\r\n    process.exit(1);\r\n};\r\nvar appDir = getAppDir();\r\nexports.appDir = appDir;\r\nvar tauriDir = path_1.resolve(appDir, 'src-tauri');\r\nexports.tauriDir = tauriDir;\r\nvar resolveDir = {\r\n    app: function (dir) { return resolvePath(appDir, dir); },\r\n    tauri: function (dir) { return resolvePath(tauriDir, dir); }\r\n};\r\nexports.resolve = resolveDir;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.downloadRustup = exports.downloadCli = void 0;\r\nvar stream_1 = __importDefault(require(\"stream\"));\r\nvar util_1 = require(\"util\");\r\nvar fs_1 = __importDefault(require(\"fs\"));\r\nvar got_1 = __importDefault(require(\"got\"));\r\nvar path_1 = __importDefault(require(\"path\"));\r\nvar pipeline = util_1.promisify(stream_1.default.pipeline);\r\n// Webpack reads the file at build-time, so this becomes a static var\r\n// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-var-requires, @typescript-eslint/no-unsafe-member-access\r\nvar tauriCliManifest = require('../../../cli.rs/Cargo.toml');\r\nvar downloads = {};\r\nfunction downloadBinaryRelease(tag, asset, outPath) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var url, removeDownloadedCliIfNeeded;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    url = \"https://github.com/tauri-apps/binary-releases/releases/download/\" + tag + \"/\" + asset;\r\n                    removeDownloadedCliIfNeeded = function () {\r\n                        try {\r\n                            if (!(url in downloads)) {\r\n                                // eslint-disable-next-line security/detect-non-literal-fs-filename\r\n                                fs_1.default.unlinkSync(outPath);\r\n                            }\r\n                        }\r\n                        finally {\r\n                            process.exit();\r\n                        }\r\n                    };\r\n                    // on exit, we remove the `tauri-cli` file if the download didn't complete\r\n                    process.on('exit', removeDownloadedCliIfNeeded);\r\n                    process.on('SIGINT', removeDownloadedCliIfNeeded);\r\n                    process.on('SIGTERM', removeDownloadedCliIfNeeded);\r\n                    process.on('SIGHUP', removeDownloadedCliIfNeeded);\r\n                    process.on('SIGBREAK', removeDownloadedCliIfNeeded);\r\n                    // TODO: Check hash of download\r\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, security/detect-non-literal-fs-filename\r\n                    return [4 /*yield*/, pipeline(got_1.default.stream(url), fs_1.default.createWriteStream(outPath)).catch(function (e) {\r\n                            try {\r\n                                // eslint-disable-next-line security/detect-non-literal-fs-filename\r\n                                fs_1.default.unlinkSync(outPath);\r\n                            }\r\n                            catch (_a) { }\r\n                            throw e;\r\n                        })\r\n                        // eslint-disable-next-line security/detect-object-injection\r\n                    ];\r\n                case 1:\r\n                    // TODO: Check hash of download\r\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, security/detect-non-literal-fs-filename\r\n                    _a.sent();\r\n                    // eslint-disable-next-line security/detect-object-injection\r\n                    downloads[url] = true;\r\n                    // eslint-disable-next-line security/detect-non-literal-fs-filename\r\n                    fs_1.default.chmodSync(outPath, 448);\r\n                    console.log('Download Complete');\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction downloadCli() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var version, platform, extension, outPath;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    version = tauriCliManifest.package.version;\r\n                    platform = process.platform;\r\n                    if (platform === 'win32') {\r\n                        platform = 'windows';\r\n                    }\r\n                    else if (platform === 'linux') {\r\n                        platform = 'linux';\r\n                    }\r\n                    else if (platform === 'darwin') {\r\n                        platform = 'macos';\r\n                    }\r\n                    else {\r\n                        throw Error('Unsupported platform');\r\n                    }\r\n                    extension = platform === 'windows' ? '.exe' : '';\r\n                    outPath = path_1.default.join(__dirname, \"../../bin/tauri-cli\" + extension);\r\n                    console.log('Downloading Rust CLI...');\r\n                    return [4 /*yield*/, downloadBinaryRelease(\"tauri-cli-v\" + version, \"tauri-cli_\" + platform + extension, outPath)];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.downloadCli = downloadCli;\r\nfunction downloadRustup() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var assetName;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    assetName = process.platform === 'win32' ? 'rustup-init.exe' : 'rustup-init.sh';\r\n                    console.log('Downloading Rustup...');\r\n                    return [4 /*yield*/, downloadBinaryRelease('rustup', assetName, path_1.default.join(__dirname, \"../../bin/\" + assetName))];\r\n                case 1: return [2 /*return*/, _a.sent()];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.downloadRustup = downloadRustup;\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar cross_spawn_1 = require(\"cross-spawn\");\r\nfunction getVersion(command, args) {\r\n    if (args === void 0) { args = []; }\r\n    try {\r\n        var child = cross_spawn_1.sync(command, __spreadArray(__spreadArray([], args), ['--version']));\r\n        if (child.status === 0) {\r\n            var output = String(child.output[1]);\r\n            return output.replace(/\\n/g, '');\r\n        }\r\n        return null;\r\n    }\r\n    catch (err) {\r\n        return null;\r\n    }\r\n}\r\nexports.default = getVersion;\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar chalk_1 = __importDefault(require(\"chalk\"));\r\nvar ms_1 = __importDefault(require(\"ms\"));\r\nvar prevTime;\r\nexports.default = (function (banner, color) {\r\n    if (color === void 0) { color = chalk_1.default.green; }\r\n    return function (msg) {\r\n        var curr = +new Date();\r\n        var diff = curr - (prevTime || curr);\r\n        prevTime = curr;\r\n        if (msg) {\r\n            console.log(\r\n            // TODO: proper typings for color and banner\r\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions, @typescript-eslint/no-unsafe-call\r\n            \" \" + color(String(banner)) + \" \" + msg + \" \" + chalk_1.default.green(\"+\" + ms_1.default(diff)));\r\n        }\r\n        else {\r\n            console.log();\r\n        }\r\n    };\r\n});\r\n","\"use strict\";\r\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\r\n// SPDX-License-Identifier: Apache-2.0\r\n// SPDX-License-Identifier: MIT\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.spawnSync = exports.spawn = void 0;\r\nvar cross_spawn_1 = __importDefault(require(\"cross-spawn\"));\r\nvar logger_1 = __importDefault(require(\"./logger\"));\r\nvar chalk_1 = __importDefault(require(\"chalk\"));\r\nvar log = logger_1.default('app:spawn');\r\nvar warn = logger_1.default('app:spawn', chalk_1.default.red);\r\n/*\r\n  Returns pid, takes onClose\r\n */\r\nvar spawn = function (cmd, params, cwd, onClose) {\r\n    var _a;\r\n    log(\"Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\r\n    log();\r\n    // TODO: move to execa?\r\n    var runner = cross_spawn_1.default(cmd, params, {\r\n        stdio: 'inherit',\r\n        cwd: cwd,\r\n        env: process.env\r\n    });\r\n    runner.on('close', function (code) {\r\n        var _a;\r\n        log();\r\n        if (code) {\r\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n            log(\"Command \\\"\" + cmd + \"\\\" failed with exit code: \" + code);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\r\n        onClose && onClose(code !== null && code !== void 0 ? code : 0, (_a = runner.pid) !== null && _a !== void 0 ? _a : 0);\r\n    });\r\n    return (_a = runner.pid) !== null && _a !== void 0 ? _a : 0;\r\n};\r\nexports.spawn = spawn;\r\n/*\r\n  Returns nothing, takes onFail\r\n */\r\nvar spawnSync = function (cmd, params, cwd, onFail) {\r\n    log(\"[sync] Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\r\n    log();\r\n    var runner = cross_spawn_1.default.sync(cmd, params, {\r\n        stdio: 'inherit',\r\n        cwd: cwd\r\n    });\r\n    // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\r\n    if (runner.status || runner.error) {\r\n        warn();\r\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\r\n        warn(\"\\u26A0\\uFE0F  Command \\\"\" + cmd + \"\\\" failed with exit code: \" + runner.status);\r\n        if (runner.status === null) {\r\n            warn(\"\\u26A0\\uFE0F  Please globally install \\\"\" + cmd + \"\\\"\");\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\r\n        onFail && onFail();\r\n        process.exit(1);\r\n    }\r\n};\r\nexports.spawnSync = spawnSync;\r\n","module.exports = require(\"@tauri-apps/toml\");;","module.exports = require(\"chalk\");;","module.exports = require(\"cross-spawn\");;","module.exports = require(\"fs\");;","module.exports = require(\"got\");;","module.exports = require(\"https\");;","module.exports = require(\"inquirer\");;","module.exports = require(\"ms\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"stream\");;","module.exports = require(\"util\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/api/dependency-manager/index.ts\");\n"],"sourceRoot":""}